<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Electromechanics Pro - Herramientas de diagn√≥stico y soluciones para talleres.">
    <meta name="author" content="Rodar">
    <title>Electromechanics Pro | Equipando tu Taller</title>

    <link rel="icon" href="{{ url_for('static', filename='imgs/Rodar.png') }}" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/rodar.css') }}">

    <style>
        /* Mejoras est√©ticas para el Modal */
        .modal-content { border-radius: 15px; border: none; overflow: hidden; }
        .modal-header { background: linear-gradient(45deg, #007bff, #0056b3); color: white; border: none; }
        .modal-body { font-size: 1.05rem; line-height: 1.6; }
        .social-card { 
            display: flex; 
            align-items: center; 
            padding: 15px; 
            margin-bottom: 10px; 
            border-radius: 10px; 
            border: 1px solid #e9ecef; 
            transition: all 0.3s ease;
            text-decoration: none !important;
            color: #333 !important;
        }
        .social-card:hover { background-color: #f8f9fa; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .social-icon { font-size: 2rem; margin-right: 15px; }
        .facebook-color { color: #1877F2; }
        .messenger-color { color: #00B2FF; }
        .highlight-box { background-color: #f0f7ff; border-left: 4px solid #007bff; padding: 15px; border-radius: 0 8px 8px 0; margin-bottom: 20px; }
    </style>
</head>

<body data-spy="scroll" data-target=".navbar" data-offset="40" id="inicio">

    <div class="modal fade" id="mensajeBienvenida" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content shadow-lg">
                <div class="modal-header">
                    <h5 class="modal-title font-weight-bold"><i class="fas fa-hand-holding-heart mr-2"></i> ¬°Bienvenido a la familia Rodar!</h5>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-dark">
                    <p>Hola, es un placer saludarte. Si est√°s aqu√≠ es porque ya has confiado en nosotros para equipar tu taller, ¬°y eso lo valoramos much√≠simo!</p>
                    
                    <div class="highlight-box">
                        <p class="mb-0"><b>¬øNos regalas un minuto?</b><br>
                        Como emprendedores, tu opini√≥n es nuestro motor. Por favor, d√©janos tu calificaci√≥n en el chat de <b>Messenger</b>. Tu feedback es fundamental para seguir creciendo y ofreci√©ndote lo mejor.</p>
                    </div>

                    <p class="font-weight-bold mb-3">√önete a nuestra comunidad activa:</p>
                    
                    <a href="https://www.facebook.com/groups/1572269854195768" target="_blank" class="social-card">
                        <i class="fab fa-facebook-messenger social-icon messenger-color"></i>
                        <div>
                            <span class="d-block font-weight-bold">Grupo de Facebook</span>
                            <small class="text-muted">¬°Comparte una foto de tu pedido y ayuda a otros colegas!</small>
                        </div>
                    </a>

                    <a href="https://www.facebook.com/profile.php?id=61584734677591" target="_blank" class="social-card">
                        <i class="fab fa-facebook social-icon facebook-color"></i>
                        <div>
                            <span class="d-block font-weight-bold">P√°gina Oficial Rodar</span>
                            <small class="text-muted">S√≠guenos para lanzamientos y ofertas exclusivas.</small>
                        </div>
                    </a>
                </div>
                <div class="modal-footer border-0 bg-light">
                    <button type="button" class="btn btn-primary btn-block py-2 font-weight-bold" data-dismiss="modal">¬°Entendido, cuenta con ello!</button>
                </div>
            </div>
        </div>
    </div>

    <nav class="custom-navbar navbar navbar-expand-lg navbar-dark fixed-top" data-spy="affix" data-offset-top="10">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="#inicio">Inicio</a></li>
                <li class="nav-item"><a class="nav-link" href="#acerca">Acerca de</a></li>
                <li class="nav-item"><a class="nav-link" href="#blog">Productos</a></li>
            </ul>
            
            <a class="navbar-brand m-auto" href="#">
                <img src="{{ url_for('static', filename='imgs/Rodar.png') }}" class="brand-img" alt="Logo">
                <span class="brand-txt">Electromechanics</span>
            </a>

            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="#blog">Ofertas</a></li>
                <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
                <li class="nav-item">
                    <a href="#contacto" class="btn btn-primary ml-xl-4">Cotizar Ahora</a>
                </li>
            </ul>
        </div>
    </nav>

    <header class="header">
        <div class="overlay text-white text-center">
            <h1 class="display-4 font-weight-bold my-3">Rodar</h1>
            <h3 class="mb-5 font-weight-light">Equipando talleres, impulsando soluciones profesionales.</h3>
            <p class="lead mb-5">(Nuestra plataforma oficial est√° en construcci√≥n para brindarte la mejor experiencia)</p>
            <a class="btn btn-lg btn-primary" href="#blog">Explorar Cat√°logo</a>
        </div>
    </header>

    <section id="acerca" class="container-fluid py-5">
        <div class="row align-items-center">
            <div class="col-lg-6 has-img-bg" style="background-image: url('{{ url_for('static', filename='imgs/taller-bg.jpg') }}'); min-height: 400px;"></div>
            <div class="col-lg-6 px-5">
                <h2 class="section-title mb-4">Potenciamos tu trabajo</h2>
                <p>En <b>Rodar</b>, nos especializamos en la venta de herramientas de alta precisi√≥n para talleres mec√°nicos, el√©ctricos y de reparaci√≥n di√©sel.</p>
                <p>Nuestra misi√≥n es proporcionar productos confiables y de alta tecnolog√≠a para el diagn√≥stico automotriz profesional.</p>
                <p class="font-weight-bold text-primary">üöóüîß Electromechanics Pro ‚Äì Tu aliado en cada diagn√≥stico.</p>
            </div>
        </div>
    </section>

    <section id="blog" class="container py-5 text-center">
        <h2 class="section-title mb-5">OFERTAS DE TEMPORADA</h2>
        <div class="row justify-content-center" id="contenedor-ofertas">
            <div class="col-md-4">
                <div class="spinner-border text-primary" role="status">
                    <span class="sr-only">Cargando cat√°logo...</span>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-4 bg-dark text-white text-center">
        <p class="mb-0">&copy; 2025 Electromechanics Pro | Una marca de <b>Rodar Ledger</b></p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 1. Mostrar el modal autom√°ticamente
        $('#mensajeBienvenida').modal('show');

        // 2. L√≥gica del Cat√°logo
        const bizKey = 'catalogo_rodar'; 
        const contenedor = document.getElementById('contenedor-ofertas');
        const fallbackImg = "{{ url_for('static', filename='imgs/blog-1.jpg') }}";

        function cargarCatalogo() {
            const datosStr = localStorage.getItem(bizKey);
            
            if (datosStr) {
                try {
                    const productos = JSON.parse(datosStr);
                    
                    if (productos && productos.length > 0) {
                        contenedor.innerHTML = ''; 
                        
                        productos.forEach(prod => {
                            const html = `
                                <div class="col-md-4 mb-4">
                                    <div class="card shadow-sm border-0 h-100">
                                        <img src="${prod.img}" class="card-img-top" alt="${prod.nombre}" onerror="this.src='${fallbackImg}'">
                                        <div class="card-body text-dark d-flex flex-column">
                                            <span class="badge badge-success mb-2 w-50 mx-auto">En Stock</span>
                                            <h5 class="card-title font-weight-bold">${prod.nombre}</h5>
                                            <h3 class="text-primary font-weight-bold">${prod.precio}</h3>
                                            <div class="mt-auto pt-3">
                                                <a href="https://wa.me/573058916907?text=Hola! Me interesa el producto: ${prod.nombre}" 
                                                   class="btn btn-outline-primary btn-block font-weight-bold" target="_blank">
                                                    <i class="fab fa-whatsapp"></i> Pedir por WhatsApp
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>`;
                            contenedor.innerHTML += html;
                        });
                        console.log("‚úÖ Cat√°logo Rodar actualizado.");
                    }
                } catch (e) {
                    console.error("‚ùå Error procesando el cat√°logo:", e);
                }
            } else {
                contenedor.innerHTML = '<p class="text-muted">Explora nuestro cat√°logo completo de herramientas profesionales.</p>';
            }
        }

        cargarCatalogo();

        // Escuchar cambios de BizFlow
        window.addEventListener('storage', (e) => {
            if (e.key === bizKey) cargarCatalogo();
        });
    });
    </script>
</body>
</html>